{% extends 'www/raster.html' %} {% load i18n %} {% load goodrain_extras %} {% load staticfiles %} {% block main-content %}
<section class="wrapper">
    <section class="panel">
        <header class="panel-heading tab-bg-dark-navy-blue ">
            <ul class="nav nav-tabs" id="nav-tabs">
                <li {% if fr == "deployed" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=deployed">概览</a>
                </li>
                {% if tenantServiceInfo.category == "application" or tenantServiceInfo.category == "manager" or tenantServiceInfo.category == "app_publish" or tenantServiceInfo.category == "app_sys_publish" %}
                <li {% if fr == "relations" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=relations">依赖</a>
                </li>
                {% endif %} {% if MODULES.Monitor_Control %}
                <li class="dropdown {% if fr == 'statistic' %} active {% endif %}">
                    {% if hasHttpServices or tenantServiceInfo.service_type == 'mysql' %}
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic" class="dropdown-toggle" data-toggle="dropdown">监控<b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic&type=realtime">实时分析</a></li>
                        <li><a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic&type=history">历史走势</a></li>
                    </ul>
                    {% else %}
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic">监控</a> {% endif %}
                </li>
                {% endif %}
                <li {% if fr == "log" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=log">日志</a>
                </li>
                <li {% if fr == "settings" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=settings">高级</a>
                </li>
                {% if tenantServiceInfo.category = "application" %}
                <li {% if fr == "share" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/share/step1?fr=share">分享</a>
                </li>
                {% endif %}
                <li class="dropdown {% if fr == 'sources' %} active {% endif %}">

                    <a href="" class="dropdown-toggle" data-toggle="dropdown">资源<b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/apps/{{tenantName}}/{{serviceAlias}}/sources/monitor?fr=sources">资源监控</a></li>
                        <li><a href="/apps/{{tenantName}}/{{serviceAlias}}/sources/alert?fr=sources">资源报警</a></li>
                    </ul>

                </li>
            </ul>
        </header>

        <div class="panel-body">
            <div class="tab-content">
                    <div class="row">
                        <div class="col-xs-6" style="padding:30px;padding-bottom: 0px;">
                            <div class="Monitorshow" id="mem" style="height:300px;"></div>
                        </div>
                        <div class="col-xs-6" style="padding:30px;padding-bottom: 0px;">
                            <div class="Monitorshow" id="cpu" style="height:300px;"></div>
                        </div>
                        <div class="col-xs-6" style="padding:30px;padding-bottom: 0px;">
                            <div class="Monitorshow" id="io" style="height:300px;"></div>
                        </div>
                        <div class="col-xs-6" style="padding:30px;padding-bottom: 0px;">
                            <div class="Monitorshow" id="fs" style="height:300px;"></div>
                        </div>
                    </div>
            </div>
        </div>
    </section>
</section>
{% endblock %} {% block extrajs %}
<script type="text/javascript" src='{% static "www/js/monitor/echarts.common.min.js" %}'></script>
<script type="text/javascript" src='{% static "www/js/monitor/common.js" %}'></script>
<script type="text/javascript" src='{% static "www/js/jquery.cookie.js" %}'></script>
<script>
    var mem = echarts.init(document.getElementById('mem'));
    var cpu = echarts.init(document.getElementById('cpu'));
    var io = echarts.init(document.getElementById('io'));
    var zfs = echarts.init(document.getElementById('fs'));
    showMem(mem,"/ajax/{{tenantName}}/{{serviceAlias}}/sources/monitor?query=mem")
    showCPU(cpu,"/ajax/{{tenantName}}/{{serviceAlias}}/sources/monitor?query=cpu")
    showIO(io,"/ajax/{{tenantName}}/{{serviceAlias}}/sources/monitor?query=io")
    showFS(zfs,"/ajax/{{tenantName}}/{{serviceAlias}}/sources/monitor?query=fs")
</script>
{% endblock %}