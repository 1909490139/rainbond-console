{% extends 'www/raster.html' %}
{% load i18n %}
{% load crispy_forms_tags %}
{% load goodrain_extras %}
{% load static %}
{% block extracss %}
    {{ block.super }}
    <link rel="stylesheet" href='{% static "www/css/process.css" %}'/>
{% endblock %}

{% block main-content %}

<section class="wrapper site-min-height">
    <!-- -->
    <p><span style="font-size: 22px; font-weight: 200; line-height: 30px; color: #28cb75; padding-top: 15px;" id="appname">{{tenantServiceInfo.service_cname}}</span></p>
     <header class="panel-heading ">
            <ul class="nav nav-tabs" id="nav-tabs">
                <li {% if fr = "deployed" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=deployed">概览</a>
                </li>
                <!--
                {% if tenantServiceInfo.category == "application" or tenantServiceInfo.category == "manager" or tenantServiceInfo.category == "app_publish" or tenantServiceInfo.category == "app_sys_publish" %}
                -->
                <li {% if fr = "relations" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=relations">依赖</a>
                </li>
                 <!--
                {% endif %}
                -->
                {% if MODULES.Monitor_Control %}
                <li class="dropdown {% if fr == 'statistic' %} active {% endif %}">
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic&type=history">监控</a>
                    <!--
                    {% if hasHttpServices or tenantServiceInfo.service_type == 'mysql' %}
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic"
                       class="dropdown-toggle" data-toggle="dropdown">监控<b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic&type=realtime">实时分析</a></li>
                        <li><a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic&type=history">历史走势</a></li>
                    </ul>
                    {% else %}
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=statistic">监控</a>
                    {% endif %}
                    -->
                </li>
                {% endif %}
                <li {% if fr = "log" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=log">日志</a>
                </li>
                <li {% if fr = "settings" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=settings">高级</a>
                </li>
                {% if tenantServiceInfo.category = "application" %}
                <li class="active" >
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/share/step1">分享</a>
                </li>
                {% endif %}
                <li {% if fr = "cost" %} class="active" {% endif %}>
                    <a href="/apps/{{tenantName}}/{{serviceAlias}}/detail/?fr=cost">费用</a>
                </li>
            </ul>
        </header>
    
    <!-- -->
    <div>
    <h2 class="main-tit">应用运行参数总览</h2>
    <!-- 01 -->
    <div class="content-tab">
        <h3 class="tit-two">应用端口</h3>
        <table>
            <thead>
            <tr>
                <th>名称</th>
                <th>容器端口</th>
                <th>协议类型</th>
                <th>默认开启对内服务</th>
                <th>默认开启外部访问</th>
            </tr>
            </thead>
            <tbody>
            {% for port in port_list %}
            <tr>
                <td>{{port.port_alias}}</td>
                <td>{{port.container_port}}</td>
                <td>{{port.protocol}}</td>
                <td><input type="checkbox" {% if port.is_inner_service %}checked="checked"{% endif %} disabled="disabled"></td>
                <td><input type="radio" {% if port.is_outer_service %}checked="checked"{% endif %} disabled="disabled"></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <!-- 02-->
    <div class="content-tab">
        <h3 class="tit-two">环境变量</h3>
        <table>
            <thead>
            <tr>
                <th>名称</th>
                <th>变量名</th>
                <th>值</th>
                <th>对内变量</th>
                <th>对外变量</th>
            </tr>
            </thead>
            <tbody>
            {% for env in env_list %}
            <tr>
                <td>{{env.name}}</td>
                <td>{{env.attr_name}}</td>
                <td>{{env.attr_value}}</td>
                <td><input type="checkbox" {% if env.scope = "inner" or env.scope = "both" %}checked="checked"{% endif %} disabled="disabled"></td>
                <td><input type="radio" {% if env.scope = "outer" or env.scope = "both" %}checked="checked"{% endif %} disabled="disabled"></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <!-- 03-->
    <div class="content-tab">
        <h3 class="tit-two">持久化目录</h3>
        <table>
            <thead>
            <tr>
                <th>持久化目录</th>
            </tr>
            </thead>
            <tbody>
            {% for volume in volume_list %}
                <tr>
                    <td>{{volume.volume_path}}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <!-- 04 -->
    <div class="content-tab">
        <h3 class="tit-two">依赖应用</h3>
        <table>
            <thead>
            <tr>
                <th>应用名称</th>
                <th>应用类型</th>
            </tr>
            </thead>
            <tbody>
            {% for dep_service in dep_service_list %}
            <tr>
                <td>{{dep_service.service_cname}}</td>
                <td>{{dep_service.service_type}}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <!--  计算资源 -->
    <div class="content-tab">
        <h3 class="tit-two">计算资源</h3>
        <div class="zybox">
            <p><span>运行内存</span><span>{{memory}}MB</span></p>
            <p><span>运行节点</span><span>{{node}}</span></p>
        </div>
    </div>
    <div class="linkbox">
        {% if dep_status %}
            {% if have_outer %}
                <a href="/apps/{{tenant_name}}/{{service_alias}}/share/step2" class="greenbtn">下一步</a>
            {% else %}
                服务没有打开对外端口，无法提供对外服务
            {% endif %}
        {% else %}
            依赖服务{{dep_service_name}}未发布, 请先发布该服务
        {% endif %}
    </div>
    </div>
</section>
{% endblock %}

{% block extrajs %}
<script src='{% static "www/js/jquery.dcjqaccordion.2.7.js" %}'></script>
<script src='{% static "www/js/jquery.scrollTo.min.js" %}'></script>
<script src='{% static "www/js/common-scripts.js" %}'></script>
{% endblock %}

